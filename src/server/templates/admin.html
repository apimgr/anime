{{define "content"}}
<!-- Admin Header -->
<div class="admin-header">
    <div>
        <h1>Admin Dashboard</h1>
        <p style="color: var(--text-secondary); margin: 0;">Manage your Anime Quotes API server</p>
    </div>
    <div class="admin-actions">
        <button class="btn btn-primary" onclick="refreshStats()">Refresh Stats</button>
        <button class="btn btn-secondary" onclick="window.location.href='/'">Back to Home</button>
    </div>
</div>

<!-- Dashboard Stats -->
<div class="dashboard-grid">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Server Status</h3>
        </div>
        <div class="card-body text-center">
            <div class="stats-value" style="color: var(--accent-success);">‚óè</div>
            <div class="stats-label">ONLINE</div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Total Quotes</h3>
        </div>
        <div class="card-body text-center">
            <div class="stats-value" id="admin-total-quotes">{{.TotalQuotes}}</div>
            <div class="stats-label">Quotes Available</div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">API Version</h3>
        </div>
        <div class="card-body text-center">
            <div class="stats-value" style="font-size: 2rem;">v1</div>
            <div class="stats-label">Current Version</div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Uptime</h3>
        </div>
        <div class="card-body text-center">
            <div class="stats-value" style="font-size: 2rem;" id="uptime">{{.Uptime}}</div>
            <div class="stats-label">Since Start</div>
        </div>
    </div>
</div>

<!-- Server Information -->
<div class="admin-section">
    <h2 class="admin-section-title">Server Information</h2>
    <div class="card">
        <div class="card-body">
            <div class="table-container">
                <table>
                    <tbody>
                        <tr>
                            <td style="font-weight: 700;">Server Address</td>
                            <td>{{.ServerAddress}}</td>
                        </tr>
                        <tr>
                            <td style="font-weight: 700;">Port</td>
                            <td>{{.ServerPort}}</td>
                        </tr>
                        <tr>
                            <td style="font-weight: 700;">API Base URL</td>
                            <td><code>http://{{.ServerURL}}/api/v1</code></td>
                        </tr>
                        <tr>
                            <td style="font-weight: 700;">Web UI URL</td>
                            <td><code>http://{{.ServerURL}}</code></td>
                        </tr>
                        <tr>
                            <td style="font-weight: 700;">Database</td>
                            <td>{{.DatabaseType}}</td>
                        </tr>
                        <tr>
                            <td style="font-weight: 700;">Go Version</td>
                            <td>{{.GoVersion}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- API Endpoints -->
<div class="admin-section">
    <h2 class="admin-section-title">API Endpoints</h2>
    <div class="results-grid">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Random Quote</h3>
                <span class="badge badge-success">GET</span>
            </div>
            <div class="card-body">
                <code style="display: block; margin-bottom: 16px;">/api/v1/random</code>
                <p style="margin: 0;">Returns a random anime quote from the collection.</p>
            </div>
            <div class="card-footer">
                <button class="btn btn-sm btn-primary" onclick="testEndpoint('/api/v1/random')">Test</button>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">All Quotes</h3>
                <span class="badge badge-success">GET</span>
            </div>
            <div class="card-body">
                <code style="display: block; margin-bottom: 16px;">/api/v1/quotes</code>
                <p style="margin: 0;">Returns all anime quotes in the database.</p>
            </div>
            <div class="card-footer">
                <button class="btn btn-sm btn-primary" onclick="testEndpoint('/api/v1/quotes')">Test</button>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Health Check</h3>
                <span class="badge badge-success">GET</span>
            </div>
            <div class="card-body">
                <code style="display: block; margin-bottom: 16px;">/api/v1/health</code>
                <p style="margin: 0;">Returns server health status and statistics.</p>
            </div>
            <div class="card-footer">
                <button class="btn btn-sm btn-primary" onclick="testEndpoint('/api/v1/health')">Test</button>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="admin-section">
    <h2 class="admin-section-title">Quick Actions</h2>
    <div class="features-grid">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Server Settings</h3>
            </div>
            <div class="card-body">
                <p>Configure CORS, rate limits, security headers, and connection settings.</p>
            </div>
            <div class="card-footer">
                <a href="/admin/settings" class="btn btn-primary">Manage Settings</a>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">View Logs</h3>
            </div>
            <div class="card-body">
                <p>Check server logs for debugging and monitoring purposes.</p>
            </div>
            <div class="card-footer">
                <button class="btn btn-secondary" onclick="showToast('Log viewer coming soon!', 'info')">View Logs</button>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Database Backup</h3>
            </div>
            <div class="card-body">
                <p>Create a backup of the quotes database.</p>
            </div>
            <div class="card-footer">
                <button class="btn btn-secondary" onclick="showToast('Backup feature coming soon!', 'info')">Create Backup</button>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">System Info</h3>
            </div>
            <div class="card-body">
                <p>View detailed system information and resource usage.</p>
            </div>
            <div class="card-footer">
                <button class="btn btn-secondary" onclick="showSystemInfo()">View Info</button>
            </div>
        </div>
    </div>
</div>

<!-- Admin JavaScript -->
<script>
/**
 * Refresh statistics
 */
async function refreshStats() {
    try {
        const health = await apiGet('/api/v1/health');
        document.getElementById('admin-total-quotes').textContent = health.totalQuotes || '0';
        showToast('Statistics refreshed!', 'success', 2000);
    } catch (error) {
        console.error('Failed to refresh stats:', error);
    }
}

/**
 * Test an API endpoint
 */
async function testEndpoint(endpoint) {
    try {
        const response = await apiGet(endpoint);
        const content = `
            <h3 style="margin-bottom: 16px;">Response from ${endpoint}</h3>
            <pre style="max-height: 400px; overflow: auto;"><code>${JSON.stringify(response, null, 2)}</code></pre>
        `;
        showModal('API Test Result', content);
        showToast('Endpoint test successful!', 'success', 2000);
    } catch (error) {
        showToast(`Endpoint test failed: ${error.message}`, 'error');
    }
}

/**
 * Show system information
 */
function showSystemInfo() {
    const content = `
        <div style="padding: 16px;">
            <h3 style="margin-bottom: 16px;">System Information</h3>
            <table style="width: 100%;">
                <tr>
                    <td style="font-weight: 700; padding: 8px;">User Agent</td>
                    <td style="padding: 8px;">${navigator.userAgent}</td>
                </tr>
                <tr>
                    <td style="font-weight: 700; padding: 8px;">Platform</td>
                    <td style="padding: 8px;">${navigator.platform}</td>
                </tr>
                <tr>
                    <td style="font-weight: 700; padding: 8px;">Language</td>
                    <td style="padding: 8px;">${navigator.language}</td>
                </tr>
                <tr>
                    <td style="font-weight: 700; padding: 8px;">Online</td>
                    <td style="padding: 8px;">${navigator.onLine ? 'Yes' : 'No'}</td>
                </tr>
                <tr>
                    <td style="font-weight: 700; padding: 8px;">Screen Resolution</td>
                    <td style="padding: 8px;">${window.screen.width} x ${window.screen.height}</td>
                </tr>
                <tr>
                    <td style="font-weight: 700; padding: 8px;">Viewport Size</td>
                    <td style="padding: 8px;">${window.innerWidth} x ${window.innerHeight}</td>
                </tr>
            </table>
        </div>
    `;
    showModal('System Information', content);
}

// Auto-refresh stats every 30 seconds
setInterval(refreshStats, 30000);
</script>
{{end}}
